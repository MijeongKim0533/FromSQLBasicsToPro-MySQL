
# 피벗 및 언피벗 (Pivot and Unpivot) 상세 사용 예시

## 피벗과 언피벗이란?

피벗과 언피벗은 SQL에서 데이터를 재구성하는 기법입니다. 피벗은 행 데이터를 열 형태로 변환하여 요약 정보를 제공하는 반면, 언피벗은 열 데이터를 행 형태로 변환하여 더 자세한 데이터 분석을 가능하게 합니다.

## 학습 목표

- **피벗의 개념 이해**: 피벗은 행 형태의 데이터를 열 형태로 변환하여 요약 정보를 표시합니다.
- **언피벗의 개념 이해**: 언피벗은 열 형태의 데이터를 행 형태로 변환하여 더 상세한 정보를 표시합니다.
- **데이터 재구성 방법 배우기**: 피벗과 언피벗을 사용하여 데이터를 새롭게 구성하고 분석합니다.

## 예시 쿼리 분석

### 피벗 예제
```sql
SELECT Year, 
       [1] AS JanSales, 
       [2] AS FebSales, 
       [3] AS MarSales
FROM 
   (SELECT Year, Month, SalesAmount 
    FROM MonthlySales) AS SourceTable
PIVOT
   (SUM(SalesAmount) FOR Month IN ([1], [2], [3])) AS PivotTable;
```

## 쿼리 진행 순서

1. **데이터 준비**: `MonthlySales` 테이블에서 연도, 월, 판매액 데이터를 선택합니다.
2. **피벗 적용**: 월별 판매액을 열 형태로 변환하여 각 월의 판매액을 요약합니다.
3. **결과 조회**: 변환된 데이터를 조회하여 각 연도별 월별 판매액을 확인합니다.

## 쿼리 진행도 (Mermaid)

```mermaid
graph LR
    A[데이터 준비: MonthlySales] --> B[피벗 적용]
    B --> C[결과 조회]
    C --> D[연도별 월별 판매액 요약]
```

피벗을 사용하면 데이터를 요약하고 보고서를 작성하는 데 매우 유용합니다. 언피벗을 사용하면 보다 상세한 데이터 분석을 수행할 수 있습니다.
